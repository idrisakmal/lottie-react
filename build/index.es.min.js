import e,{forwardRef as n,useRef as t,useEffect as r}from"react";import o from"prop-types";import a from"lottie-web";function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){u(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var l=n((function(n,o){var u=n.animationData,c=n.loop,l=n.autoplay,f=n.initialSegment,d=n.onComplete,p=n.onLoopComplete,s=n.onEnterFrame,m=n.onSegmentStart,y=n.onConfigReady,g=n.onDataReady,S=n.onDataFailed,b=n.onLoadedImages,D=n.onDOMLoaded,v=n.onDestroy,O=n.style,h=n.className,P=t(null),L=t(null),j=o||t(),A=function(){L.current&&L.current.play()},E=function(){L.current&&L.current.stop()},C=function(){L.current&&L.current.pause()},T=function(e){L.current&&L.current.setSpeed(e)},w=function(e,n){L.current&&L.current.goToAndPlay(e,n)},R=function(e,n){L.current&&L.current.goToAndStop(e,n)},F=function(e){L.current&&L.current.setDirection(e)},N=function(e,n){L.current&&L.current.playSegments(e,n)},M=function(e){L.current&&L.current.setSubframe(e)},_=function(){L.current&&L.current.destroy()},I=function(e){if(L.current)return L.current.getDuration(e)};r((function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};L.current&&L.current.destroy();var n=i(i({animationData:u||null,loop:Number.isNaN(c)?!1!==c:c,autoplay:!1!==l,initialSegment:f||null},e),{},{container:P.current});L.current=a.loadAnimation(n),j&&(j.current={play:A,stop:E,pause:C,setSpeed:T,goToAndPlay:w,goToAndStop:R,setDirection:F,playSegments:N,setSubframe:M,destroy:_,getDuration:I})}()}),[u,c,l,f]);return r((function(){var e=[{name:"complete",handler:d},{name:"loopComplete",handler:p},{name:"enterFrame",handler:s},{name:"segmentStart",handler:m},{name:"config_ready",handler:y},{name:"data_ready",handler:g},{name:"data_failed",handler:S},{name:"loaded_images",handler:b},{name:"DOMLoaded",handler:D},{name:"destroy",handler:v}].map((function(e){return function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return L.current&&(t&&L.current.removeEventListener(e),e&&n)?(L.current.addEventListener(e,n),function(){L.current.removeEventListener(e,n)}):function(){}}(e.name,e.handler)}));return function(){e.forEach((function(e){return e()}))}}),[d,p,s,m,y,g,S,b,D,v]),e.createElement("div",{ref:P,style:O,className:h})}));l.propTypes={animationData:o.shape(void 0).isRequired,loop:o.oneOfType([o.bool,o.number]),autoplay:o.bool,initialSegment:o.arrayOf(o.shape(o.number.isRequired)),onComplete:o.func,onLoopComplete:o.func,onEnterFrame:o.func,onSegmentStart:o.func,onConfigReady:o.func,onDataReady:o.func,onDataFailed:o.func,onLoadedImages:o.func,onDOMLoaded:o.func,onDestroy:o.func,style:o.shape(void 0)},l.defaultProps={loop:!0,autoplay:!0,initialSegment:null,onComplete:null,onLoopComplete:null,onEnterFrame:null,onSegmentStart:null,onConfigReady:null,onDataReady:null,onDataFailed:null,onLoadedImages:null,onDOMLoaded:null,onDestroy:null,style:null};var f={Animator:l,useAnimator:function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=t(null),c=t(null);r((function(){u.current=a.loadAnimation(i(i({},n),{},{container:c.current}))}),[]);var l=function(){u.current&&u.current.play()},f=function(){u.current&&u.current.stop()},d=function(){u.current&&u.current.pause()},p=function(e){u.current&&u.current.setSpeed(e)},s=function(e,n){u.current&&u.current.goToAndStop(e,n)},m=function(e,n){u.current&&u.current.goToAndPlay(e,n)},y=function(e){u.current&&u.current.setDirection(e)},g=function(e,n){u.current&&u.current.playSegments(e,n)},S=function(e){u.current&&u.current.setSubframe(e)},b=function(){u.current&&u.current.destroy()},D=function(e){if(u.current)return u.current.getDuration(e)},v=e.createElement("div",{style:o,ref:c});return{View:v,play:l,stop:f,pause:d,setSpeed:p,goToAndStop:s,goToAndPlay:m,setDirection:y,playSegments:g,setSubframe:S,destroy:b,getDuration:D}}};export default f;
